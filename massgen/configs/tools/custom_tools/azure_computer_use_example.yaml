# MassGen Configuration: Azure OpenAI Computer Use
#
# This configuration uses Azure OpenAI's computer-use-preview model
# for browser automation tasks via the Responses API.
#
# Note: Requires Azure OpenAI resource with computer-use-preview deployment
#
# Usage:
#   massgen --config azure_computer_use_example.yaml
#
# Prerequisites:
#   1. Azure OpenAI resource in supported region (eastus2, swedencentral, southindia)
#   2. computer-use-preview model deployment
#   3. Request access: https://aka.ms/oai/computer-use
#   4. Set environment variables (see below)
#   5. Playwright installed: pip install playwright && playwright install
#
# Environment Variables Required:
#   OPENAI_API_KEY=<your-azure-openai-api-key>
#   OPENAI_BASE_URL=https://YOUR-RESOURCE-NAME.openai.azure.com/openai/v1/
#   OPENAI_API_VERSION=2024-10-01-preview
#
# Or use Azure authentication:
#   Use DefaultAzureCredential by not setting OPENAI_API_KEY

agents:
  - id: "azure_computer_agent"
    backend:
      type: "openai"  # Use OpenAI/Response backend for Responses API
      model: "computer-use-preview"  # Must match your deployment name
      base_url: "${OPENAI_BASE_URL}"  # e.g., https://YOUR-RESOURCE.openai.azure.com/openai/v1/
      # Azure-specific settings (configured via environment variables above)
      enable_computer_use: true  # Enable hosted computer_use_preview tool
      display_width: 1024
      display_height: 768
      computer_environment: "browser"  # or "mac", "windows", "ubuntu"
      custom_tools:
        # Note: For Azure OpenAI computer-use-preview, the hosted tool is automatically
        # added when enable_computer_use: true. You don't need to add the computer_use
        # custom tool separately unless you want to override the behavior.
        - name: ["understand_image"]
          category: "multimodal"
          path: "massgen/tool/_multimodal_tools/understand_image.py"
          function: ["understand_image"]

    system_message: |
      You are an AI assistant with access to Azure OpenAI's Computer Use capabilities.
      
      You can autonomously control a browser or desktop environment to complete tasks.
      The computer-use-preview model has been configured with the hosted computer use tool.
      
      When users ask you to:
      - Browse websites or search for information
      - Fill out forms or interact with web pages
      - Research products or compare options
      - Extract data from multiple pages
      - Navigate complex websites
      - Perform desktop automation tasks (if using desktop environment)
      
      You can directly interact with the environment - no need to call specific tools.
      The model will automatically use the computer use capabilities.
      
      Example tasks:
      - "Search for Python documentation on Bing"
      - "Go to Wikipedia and find information about AI"
      - "Compare prices of laptops on shopping sites"
      - "Fill out a form on example.com with test data"
      
      The model will autonomously complete the task using the hosted computer use tool.
      
      Note: This uses Azure OpenAI's Responses API with built-in safety checks and
      the computer_use_preview hosted tool.

display:
  type: "rich_terminal"
